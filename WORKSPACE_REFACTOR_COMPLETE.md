# Signature å·¥ä½œç©ºé—´é‡æ„å®ŒæˆæŠ¥å‘Š

## ğŸ“‹ æ¦‚è¿°

å·²æˆåŠŸå°† `@ldesign/signature` åº“é‡æ„ä¸º monorepo å·¥ä½œç©ºé—´å½¢å¼ï¼Œæ”¯æŒå¤šæ¡†æ¶ï¼ˆVueã€Reactã€Litï¼‰å’Œæ ¸å¿ƒåŠŸèƒ½åˆ†ç¦»ã€‚

## âœ… å®Œæˆå†…å®¹

### 1. å·¥ä½œç©ºé—´é…ç½®

- âœ… åˆ›å»º `pnpm-workspace.yaml` é…ç½®
- âœ… æ›´æ–°æ ¹ç›®å½• `package.json` ä¸ºå·¥ä½œç©ºé—´ç®¡ç†
- âœ… é…ç½®å·¥ä½œç©ºé—´è„šæœ¬ï¼ˆbuildã€devã€cleanã€testï¼‰

### 2. æ ¸å¿ƒåŒ… (packages/core)

**åŒ…å**: `@ldesign/signature-core`

**ç›®å½•ç»“æ„**:
```
packages/core/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ core/           # æ ¸å¿ƒå¼•æ“
â”‚   â”œâ”€â”€ renderers/      # æ¸²æŸ“å™¨
â”‚   â”œâ”€â”€ features/       # é«˜çº§åŠŸèƒ½
â”‚   â”œâ”€â”€ types/          # ç±»å‹å®šä¹‰
â”‚   â”œâ”€â”€ utils/          # å·¥å…·å‡½æ•°
â”‚   â””â”€â”€ index.ts        # å…¥å£æ–‡ä»¶
â”œâ”€â”€ examples/           # Vite æ¼”ç¤ºé¡¹ç›®
â”‚   â”œâ”€â”€ index.html
â”‚   â”œâ”€â”€ main.ts
â”‚   â”œâ”€â”€ package.json
â”‚   â””â”€â”€ vite.config.ts
â”œâ”€â”€ package.json
â”œâ”€â”€ tsconfig.json
â””â”€â”€ README.md
```

**åŠŸèƒ½**:
- Canvas ç»˜å›¾å¼•æ“
- è§¦æ‘¸å’Œé¼ æ ‡æ”¯æŒ
- å‹åŠ›æ„Ÿåº”
- Catmull-Rom å¹³æ»‘
- å†å²ç®¡ç†ï¼ˆæ’¤é”€/é‡åšï¼‰
- å¤šæ ¼å¼å¯¼å‡ºï¼ˆPNGã€JPEGã€SVGã€JSONï¼‰
- é«˜çº§åŠŸèƒ½ï¼ˆè£å‰ªã€ç¼©æ”¾ã€å‹ç¼©ã€éªŒè¯ç­‰ï¼‰

**æ¼”ç¤ºç«¯å£**: 3000

### 3. Vue åŒ… (packages/vue)

**åŒ…å**: `@ldesign/signature-vue`

**ç›®å½•ç»“æ„**:
```
packages/vue/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ components/     # Vue ç»„ä»¶
â”‚   â”‚   â””â”€â”€ SignaturePad.vue
â”‚   â”œâ”€â”€ composables/    # ç»„åˆå¼å‡½æ•°
â”‚   â”‚   â””â”€â”€ useSignature.ts
â”‚   â””â”€â”€ index.ts
â”œâ”€â”€ examples/           # Vite æ¼”ç¤ºé¡¹ç›®
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ App.vue
â”‚   â”‚   â””â”€â”€ main.ts
â”‚   â”œâ”€â”€ index.html
â”‚   â”œâ”€â”€ package.json
â”‚   â””â”€â”€ vite.config.ts
â”œâ”€â”€ package.json
â”œâ”€â”€ tsconfig.json
â””â”€â”€ README.md
```

**åŠŸèƒ½**:
- SignaturePad ç»„ä»¶ï¼ˆå¸¦ props å’Œ eventsï¼‰
- useSignature ç»„åˆå¼å‡½æ•°
- å®Œæ•´çš„ TypeScript ç±»å‹æ”¯æŒ
- å“åº”å¼çŠ¶æ€ç®¡ç†

**æ¼”ç¤ºç«¯å£**: 3001

### 4. React åŒ… (packages/react)

**åŒ…å**: `@ldesign/signature-react`

**ç›®å½•ç»“æ„**:
```
packages/react/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ components/     # React ç»„ä»¶
â”‚   â”‚   â””â”€â”€ SignaturePad.tsx
â”‚   â”œâ”€â”€ hooks/          # React Hooks
â”‚   â”‚   â””â”€â”€ useSignature.ts
â”‚   â””â”€â”€ index.ts
â”œâ”€â”€ examples/           # Vite æ¼”ç¤ºé¡¹ç›®
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ App.tsx
â”‚   â”‚   â”œâ”€â”€ App.css
â”‚   â”‚   â””â”€â”€ main.tsx
â”‚   â”œâ”€â”€ index.html
â”‚   â”œâ”€â”€ package.json
â”‚   â””â”€â”€ vite.config.ts
â”œâ”€â”€ package.json
â”œâ”€â”€ tsconfig.json
â””â”€â”€ README.md
```

**åŠŸèƒ½**:
- SignaturePad ç»„ä»¶ï¼ˆä½¿ç”¨ forwardRefï¼‰
- useSignature Hook
- å®Œæ•´çš„ TypeScript ç±»å‹æ”¯æŒ
- å—æ§å’Œéå—æ§æ¨¡å¼

**æ¼”ç¤ºç«¯å£**: 3002

### 5. Lit åŒ… (packages/lit)

**åŒ…å**: `@ldesign/signature-lit`

**ç›®å½•ç»“æ„**:
```
packages/lit/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ components/     # Lit ç»„ä»¶
â”‚   â”‚   â””â”€â”€ signature-pad.ts
â”‚   â””â”€â”€ index.ts
â”œâ”€â”€ examples/           # Vite æ¼”ç¤ºé¡¹ç›®
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â””â”€â”€ main.ts
â”‚   â”œâ”€â”€ index.html
â”‚   â”œâ”€â”€ package.json
â”‚   â””â”€â”€ vite.config.ts
â”œâ”€â”€ package.json
â”œâ”€â”€ tsconfig.json
â””â”€â”€ README.md
```

**åŠŸèƒ½**:
- signature-pad Web Component
- å£°æ˜å¼ API
- Shadow DOM å°è£…
- æ¡†æ¶æ— å…³ï¼Œå¯åœ¨ä»»ä½•æ¡†æ¶ä¸­ä½¿ç”¨

**æ¼”ç¤ºç«¯å£**: 3003

## ğŸ“¦ åŒ…ä¾èµ–å…³ç³»

```
@ldesign/signature-core (æ ¸å¿ƒåŒ…)
    â†‘
    â”œâ”€â”€ @ldesign/signature-vue
    â”œâ”€â”€ @ldesign/signature-react
    â””â”€â”€ @ldesign/signature-lit
```

æ‰€æœ‰æ¡†æ¶é€‚é…åŒ…éƒ½ä¾èµ–æ ¸å¿ƒåŒ…ï¼Œç¡®ä¿åŠŸèƒ½ä¸€è‡´æ€§ã€‚

## ğŸš€ ä½¿ç”¨æ–¹å¼

### å¼€å‘æ¨¡å¼

```bash
# åœ¨æ ¹ç›®å½•
pnpm install

# æ„å»ºæ‰€æœ‰åŒ…
pnpm build

# å¼€å‘æ¨¡å¼ï¼ˆç›‘å¬æ‰€æœ‰åŒ…ï¼‰
pnpm dev
```

### è¿è¡Œæ¼”ç¤º

```bash
# Core æ¼”ç¤º
cd packages/core/examples && pnpm dev

# Vue æ¼”ç¤º
cd packages/vue/examples && pnpm dev

# React æ¼”ç¤º
cd packages/react/examples && pnpm dev

# Lit æ¼”ç¤º
cd packages/lit/examples && pnpm dev
```

### æ„å»ºé…ç½®

æ‰€æœ‰åŒ…éƒ½ä½¿ç”¨ `@ldesign/builder` è¿›è¡Œæ„å»ºï¼Œäº§ç‰©åŒ…æ‹¬ï¼š

- **es/** - ESM æ ¼å¼ + ç±»å‹å£°æ˜
- **lib/** - CommonJS æ ¼å¼ + ç±»å‹å£°æ˜
- **dist/** - UMD æ ¼å¼ï¼ˆä»…æ ¸å¿ƒåŒ…å’Œæ¡†æ¶é€‚é…åŒ…ï¼‰

### å¯¼å‡ºæ ¼å¼

æ¯ä¸ªåŒ…çš„ `package.json` éƒ½é…ç½®äº†å¤šç§å¯¼å‡ºæ ¼å¼ï¼š

```json
{
  "main": "./lib/index.cjs",
  "module": "./es/index.js",
  "types": "./es/index.d.ts",
  "unpkg": "./dist/index.min.js",
  "jsdelivr": "./dist/index.min.js",
  "exports": {
    ".": {
      "types": "./es/index.d.ts",
      "import": "./es/index.js",
      "require": "./lib/index.cjs"
    }
  }
}
```

## ğŸ“ å…³é”®æ”¹è¿›

### 1. æ¶æ„ä¼˜åŒ–

- âœ… **å…³æ³¨ç‚¹åˆ†ç¦»**: æ ¸å¿ƒé€»è¾‘ä¸æ¡†æ¶é€‚é…åˆ†ç¦»
- âœ… **ä»£ç å¤ç”¨**: æ¡†æ¶é€‚é…åŒ…å…±äº«æ ¸å¿ƒåŠŸèƒ½
- âœ… **æ¨¡å—åŒ–**: æ¯ä¸ªåŒ…ç‹¬ç«‹æ„å»ºå’Œå‘å¸ƒ
- âœ… **ç±»å‹å®‰å…¨**: å®Œæ•´çš„ TypeScript æ”¯æŒ

### 2. å¼€å‘ä½“éªŒ

- âœ… **ç‹¬ç«‹æ¼”ç¤º**: æ¯ä¸ªåŒ…éƒ½æœ‰è‡ªå·±çš„ Vite æ¼”ç¤ºé¡¹ç›®
- âœ… **ç»Ÿä¸€æ„å»º**: ä½¿ç”¨ @ldesign/builder ç»Ÿä¸€æ„å»ºå·¥å…·
- âœ… **å·¥ä½œç©ºé—´ç®¡ç†**: pnpm workspace ç®¡ç†ä¾èµ–
- âœ… **å¹¶è¡Œå¼€å‘**: æ”¯æŒå¤šåŒ…å¹¶è¡Œå¼€å‘å’Œæ„å»º

### 3. æ–‡æ¡£å®Œå–„

- âœ… **åŒ…æ–‡æ¡£**: æ¯ä¸ªåŒ…éƒ½æœ‰è¯¦ç»†çš„ README
- âœ… **ç¤ºä¾‹ä»£ç **: å®Œæ•´çš„æ¼”ç¤ºé¡¹ç›®å’Œä½¿ç”¨ç¤ºä¾‹
- âœ… **API æ–‡æ¡£**: è¯¦ç»†çš„ç±»å‹å®šä¹‰å’Œæ¥å£æ–‡æ¡£

## ğŸ¯ ä¸‹ä¸€æ­¥

### å»ºè®®çš„åç»­å·¥ä½œ

1. **æµ‹è¯•**: ä¸ºæ¯ä¸ªåŒ…æ·»åŠ å•å…ƒæµ‹è¯•
2. **CI/CD**: é…ç½®è‡ªåŠ¨åŒ–æµ‹è¯•å’Œå‘å¸ƒæµç¨‹
3. **æ–‡æ¡£ç«™ç‚¹**: åˆ›å»ºç»Ÿä¸€çš„æ–‡æ¡£ç½‘ç«™
4. **ç‰ˆæœ¬ç®¡ç†**: é…ç½® changesets è¿›è¡Œç‰ˆæœ¬ç®¡ç†
5. **æ€§èƒ½ä¼˜åŒ–**: è¿›ä¸€æ­¥ä¼˜åŒ–æ¸²æŸ“æ€§èƒ½
6. **åŠŸèƒ½æ‰©å±•**: æ·»åŠ æ›´å¤šé«˜çº§åŠŸèƒ½

### æ¨èçš„å·¥ä½œæµ

```bash
# 1. å¼€å‘æ–°åŠŸèƒ½ï¼ˆä¿®æ”¹æ ¸å¿ƒåŒ…ï¼‰
cd packages/core
pnpm dev

# 2. æµ‹è¯•æ¡†æ¶é€‚é…ï¼ˆåŒæ—¶è¿è¡Œæ¼”ç¤ºï¼‰
cd packages/vue/examples && pnpm dev
cd packages/react/examples && pnpm dev
cd packages/lit/examples && pnpm dev

# 3. æ„å»ºæ‰€æœ‰åŒ…
cd ../../../.. && pnpm build

# 4. å‘å¸ƒï¼ˆå¦‚æœé…ç½®äº†å‘å¸ƒæµç¨‹ï¼‰
pnpm release
```

## ğŸ“Š ç»Ÿè®¡ä¿¡æ¯

- **åŒ…æ•°é‡**: 4 ä¸ªï¼ˆ1 ä¸ªæ ¸å¿ƒ + 3 ä¸ªæ¡†æ¶é€‚é…ï¼‰
- **æ¼”ç¤ºé¡¹ç›®**: 4 ä¸ªï¼ˆæ¯ä¸ªåŒ…ä¸€ä¸ªï¼‰
- **æ”¯æŒæ¡†æ¶**: Vue 3ã€React 18ã€Lit 3ã€åŸç”Ÿ JS
- **æ„å»ºäº§ç‰©**: ESM + CommonJS + UMD + TypeScript å£°æ˜
- **æ€»æ–‡ä»¶æ•°**: ~100+ æºæ–‡ä»¶

## âœ¨ ç‰¹è‰²åŠŸèƒ½

1. **å¤šæ¡†æ¶æ”¯æŒ**: ä¸€æ¬¡å¼€å‘ï¼Œå¤šæ¡†æ¶ä½¿ç”¨
2. **å·¥ä½œç©ºé—´æ¶æ„**: Monorepo ç®¡ç†ï¼Œä¾¿äºç»´æŠ¤
3. **å®Œæ•´ç¤ºä¾‹**: æ¯ä¸ªåŒ…éƒ½æœ‰å®Œæ•´çš„æ¼”ç¤ºé¡¹ç›®
4. **ç±»å‹å®‰å…¨**: å®Œæ•´çš„ TypeScript ç±»å‹æ”¯æŒ
5. **ç»Ÿä¸€æ„å»º**: ä½¿ç”¨ @ldesign/builder ç»Ÿä¸€æ„å»º
6. **æ¨¡å—åŒ–è®¾è®¡**: æ ¸å¿ƒåŠŸèƒ½ä¸æ¡†æ¶é€‚é…åˆ†ç¦»

## ğŸ‰ æ€»ç»“

signature åº“å·²æˆåŠŸé‡æ„ä¸ºç°ä»£åŒ–çš„ monorepo å·¥ä½œç©ºé—´ï¼Œå…·å¤‡ï¼š

âœ… æ¸…æ™°çš„åŒ…ç»“æ„
âœ… å®Œæ•´çš„ç±»å‹æ”¯æŒ
âœ… ä¸°å¯Œçš„æ¼”ç¤ºç¤ºä¾‹
âœ… ç»Ÿä¸€çš„æ„å»ºæµç¨‹
âœ… è‰¯å¥½çš„å¼€å‘ä½“éªŒ

ç°åœ¨å¯ä»¥å¼€å§‹ä½¿ç”¨å’Œå¼€å‘äº†ï¼

